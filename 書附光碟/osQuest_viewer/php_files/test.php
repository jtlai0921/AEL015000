 <html> <head> <meta http-equiv="content-type" content="text/html; charset=utf-8" /> <title>模擬測驗</title> <link href="default.css" rel="stylesheet" type="text/css" /> </head> <body> <div id="wrapper" align="center">  <?php include 'xmldocs\header.php'; ?>  <div id="page"> <div id="content" align="left"> <h3 style="margin-bottom: 0px;">歡迎使用學習評量測驗系統 2.6版</h3> <table border="0"><tr><td width="500"> <?php error_reporting(E_ERROR); $msg = ""; if (isset($_POST['createxml'])) { $num = $_POST["numofquestion"]; $chapters = $_POST["chapters"]; $files_str = ""; foreach($chapters as $chapter) $files_str = $files_str . $chapter . ","; $files_str = substr($files_str, 0, strlen($files_str) -1); if ( strlen(rtrim($files_str)) > 0 ) { require('class_test.php'); $test = new test($files_str, $num); $output = $test->get_test_xml(); $path = "test.xml"; $fp = fopen($path,"w"); if ($fp ) { if ( strlen($output) > 0 ) { fwrite($fp, $output); fclose($fp); header("Location: generatequiz.php?chapter=test.xml"); } else $msg = "錯誤: 沒有取得模擬試題的XML內容字串!"; } else $msg = "錯誤: 模擬試題的XML檔案開啟錯誤!"; } else $msg = "錯誤: 沒有選擇建立試題的章名!"; } echo "<fieldset><legend>模擬測驗</legend>"; echo "<form action='test.php' method='post'>"; echo "<br/>選擇模擬測驗包含的章名<small>(可搭配Ctrl和Shift鍵複選)</small>: <br/>"; echo "<select name='chapters[]' size='5' multiple>"; if ( $handle = opendir('./xmldocs') ) { while (false !== ($file = readdir($handle))) { if ($file != "." && $file != ".." && $file != "Cover.jpg" && $file !="header.php" && $file !="Thumbs.db") { $files[] = $file; } } closedir($handle); sort($files); foreach( $files As $file ) echo "<option value='$file'>" . basename($file, ".xml") . "</option>"; } echo "</select>"; echo "<br/><br/>選擇每章的試題數: "; echo "<select name='numofquestion'>"; echo "<option value='2'>2</option>"; echo "<option value='3'>3</option>"; echo "<option value='4'>4</option>"; echo "<option value='5'>5</option>"; echo "<option value='6'>6</option>"; echo "<option value='7'>7</option>"; echo "<option value='8'>8</option>"; echo "</select>"; echo "<br/><br/>"; echo "<input type=submit name='createxml' value='開始模擬測驗'></input>"; if ( file_exists("test.xml")) { echo " <small><a href='generatequiz.php?chapter=test.xml'>執行上次建立的模擬測驗</a></small>"; } echo "</form>"; echo "<br/></fieldset>"; if ( strlen($msg) > 0 ) echo "<h4><font color='red'>" . $msg . "</font></h4>"; echo "<br/><br/>"; ?> </td> <td> <img src="xmldocs\Cover.jpg" align="right"/> </td> </tr> </table> 	 </div>  </div>  <div id="footer"> <?php include 'footer.php'; ?> </div> </div>  </body> </html>